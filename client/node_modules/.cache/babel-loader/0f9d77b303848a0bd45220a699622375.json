{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\vpoli\\\\Desktop\\\\MERNPortfolio\\\\reactportfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\vpoli\\\\Desktop\\\\MERNPortfolio\\\\reactportfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\vpoli\\\\Desktop\\\\MERNPortfolio\\\\reactportfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\vpoli\\\\Desktop\\\\MERNPortfolio\\\\reactportfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\vpoli\\\\Desktop\\\\MERNPortfolio\\\\reactportfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import axios from\"axios\";import Navbar from\"../components/navbar\";import Footer from\"../components/footer\";import\"./style2.css\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={data:[],id:0,message:null,email:null,name:null,intervalIsSet:false,idToDelete:null,idToUpdate:null,objectToUpdate:null};_this.getDataFromDb=function(){fetch(\"/api/getData\").then(function(data){return data.json();}).then(function(res){return _this.setState({data:res.data});});};_this.putDataToDB=function(message){var currentIds=_this.state.data.map(function(data){return data.id;});var idToBeAdded=0;while(currentIds.includes(idToBeAdded)){++idToBeAdded;}axios.post(\"/api/putData\",{id:idToBeAdded,message:_this.state.message,email:_this.state.email,name:_this.state.name});_this.state.history.push('/visitor');};_this.deleteFromDB=function(idTodelete){var objIdToDelete=null;_this.state.data.forEach(function(dat){if(dat.id===idTodelete){objIdToDelete=dat._id;}});axios.delete(\"/api/deleteData\",{data:{id:objIdToDelete}});};_this.updateDB=function(idToUpdate,updateToApply){var objIdToUpdate=null;_this.state.data.forEach(function(dat){if(dat.id===idToUpdate){objIdToUpdate=dat._id;}});axios.post(\"/api/updateData\",{id:objIdToUpdate,update:{message:updateToApply}});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.getDataFromDb();if(!this.state.intervalIsSet){var interval=setInterval(this.getDataFromDb,1000);this.setState({intervalIsSet:interval});}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.state.intervalIsSet){clearInterval(this.state.intervalIsSet);this.setState({intervalIsSet:null});}}},{key:\"handleSubmit\",value:function handleSubmit(){this.props.history.push('/visitor');}},{key:\"render\",value:function render(){var _this2=this;var data=this.state.data;return React.createElement(\"div\",null,React.createElement(Navbar,null),React.createElement(\"section\",{className:\"container-fluid mainBox\"},React.createElement(\"div\",null,React.createElement(\"div\",{className:\"padTop\",style:{padding:\"10px\"}},React.createElement(\"form\",{onSubmit:this.handleSubmit.bind(this)},React.createElement(\"input\",{type:\"text\",onChange:function onChange(e){return _this2.setState({name:e.target.value});},placeholder:\"Name\",style:{width:\"200px\"},ref:\"name\"}),React.createElement(\"br\",null),React.createElement(\"input\",{type:\"text\",onChange:function onChange(e){return _this2.setState({email:e.target.value});},placeholder:\"email\",style:{width:\"200px\"}}),React.createElement(\"br\",null),React.createElement(\"textarea\",{type:\"text\",onChange:function onChange(e){return _this2.setState({message:e.target.value});},placeholder:\"Type messeage here\",rows:\"6\",cols:\"125\",className:\"form-control\",target:\"/visitor\"}),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"button\",{onClick:function onClick(){return _this2.putDataToDB(_this2.state.message,_this2.state.name,_this2.state.email);}},\"Leave a Message\"),React.createElement(\"br\",null),React.createElement(\"br\",null)))),React.createElement(\"h3\",null,\"Visitors\"),React.createElement(\"div\",{className:\"mainBoxBorder\"},React.createElement(\"ul\",null,data.length<=0?\"NO DB ENTRIES YET\":data.map(function(dat){return React.createElement(\"li\",{style:{padding:\"10px\"},key:dat},React.createElement(\"span\",{className:\"visitColumn\",style:{color:\"gray\"}},\" name:   \",dat.name,\" \"),React.createElement(\"span\",{className:\"visitColumn\",style:{color:\"gray\"}},\" email:   \",dat.email),React.createElement(\"span\",{className:\"visitColumn\",style:{color:\"gray\"}},\" message:  \",dat.message));})),React.createElement(\"br\",null))),React.createElement(Footer,null));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/vpoli/Desktop/MERNPortfolio/reactportfolio/client/src/pages/visitor.js"],"names":["React","Component","axios","Navbar","Footer","App","state","data","id","message","email","name","intervalIsSet","idToDelete","idToUpdate","objectToUpdate","getDataFromDb","fetch","then","json","res","setState","putDataToDB","currentIds","map","idToBeAdded","includes","post","history","push","deleteFromDB","idTodelete","objIdToDelete","forEach","dat","_id","delete","updateDB","updateToApply","objIdToUpdate","update","interval","setInterval","clearInterval","props","padding","handleSubmit","bind","e","target","value","width","length","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nimport Navbar from \"../components/navbar\";\nimport Footer from \"../components/footer\";\n\nimport \"./style2.css\"\n\n\nclass App extends Component {\n  state = {\n    data: [],\n    id: 0,\n    message: null,\n    email: null,\n    name: null,\n    intervalIsSet: false,\n    idToDelete: null,\n    idToUpdate: null,\n    objectToUpdate: null\n  };\n\n  componentDidMount() {\n    this.getDataFromDb();\n    if (!this.state.intervalIsSet) {\n      let interval = setInterval(this.getDataFromDb, 1000);\n      this.setState({ intervalIsSet: interval });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.state.intervalIsSet) {\n      clearInterval(this.state.intervalIsSet);\n      this.setState({ intervalIsSet: null });\n    }\n  }\n\n\n\n  getDataFromDb = () => {\n    fetch(\"/api/getData\")\n      .then(data => data.json())\n      .then(res => this.setState({ data: res.data }));\n  };\n\n  putDataToDB = message => { \n    let currentIds = this.state.data.map(data => data.id);\n    let idToBeAdded = 0;\n    while (currentIds.includes(idToBeAdded)) {\n      ++idToBeAdded;\n    }\n\n    axios.post(\"/api/putData\", { \n      id: idToBeAdded,\n      message: this.state.message,\n      email: this.state.email,\n      name: this.state.name,\n    })\n    this.state.history.push('/visitor');\n  };\n\n  deleteFromDB = idTodelete => {\n    let objIdToDelete = null;\n    this.state.data.forEach(dat => {\n      if (dat.id === idTodelete) {\n        objIdToDelete = dat._id;\n      }\n    });\n\n    axios.delete(\"/api/deleteData\", {\n      data: {\n        id: objIdToDelete\n      }\n    });\n  };\n\n  updateDB = (idToUpdate, updateToApply) => {\n    let objIdToUpdate = null;\n    this.state.data.forEach(dat => {\n      if (dat.id === idToUpdate) {\n        objIdToUpdate = dat._id;\n      }\n    });\n\n    axios.post(\"/api/updateData\", {\n      id: objIdToUpdate,\n      update: { message: updateToApply }\n    });\n  };\n\n  handleSubmit() {\n    this.props.history.push('/visitor');\n  }\n  \n\n  render() {\n    const { data } = this.state;\n    return (\n      <div>\n      <Navbar />\n      <section className=\"container-fluid mainBox\">\n      <div>\n        <div className=\"padTop\" style={{ padding: \"10px\"}}>\n          <form onSubmit={this.handleSubmit.bind(this)}>\n        <input\n            type=\"text\"\n            onChange={e => this.setState({ name: e.target.value })}\n            placeholder=\"Name\"\n            style={{ width: \"200px\" }}\n            ref=\"name\"\n          /><br />\n           <input\n            type=\"text\"\n            onChange={e => this.setState({ email: e.target.value })}\n            placeholder=\"email\"\n            style={{ width: \"200px\" }}\n          /><br />\n          <textarea\n            type=\"text\"\n            onChange={e => this.setState({ message: e.target.value })}\n            placeholder=\"Type messeage here\"\n            rows=\"6\"\n            cols=\"125\"\n            className=\"form-control\"\n            target=\"/visitor\"\n          /><br /><br />\n          <button onClick={() => this.putDataToDB(this.state.message, this.state.name, this.state.email)}\n          >\n            Leave a Message\n          </button><br /><br />\n          </form>\n        </div>\n        </div>\n        <h3>Visitors</h3>\n          <div className=\"mainBoxBorder\">\n          \n        <ul>\n      \n          {data.length <= 0 ? \"NO DB ENTRIES YET\" : data.map(dat => (\n            <li style={{ padding: \"10px\" }} key={dat} >\n              <span className=\"visitColumn\" style={{ color: \"gray\" }}> name:   {dat.name} </span> \n              <span className=\"visitColumn\" style={{ color: \"gray\" }}> email:   {dat.email}</span> \n              <span className=\"visitColumn\" style={{ color: \"gray\" }}> message:  {dat.message}</span> \n            </li>\n          ))}\n         \n        </ul><br />\n      </div>\n      </section>\n      <Footer />\n      </div>\n        \n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}